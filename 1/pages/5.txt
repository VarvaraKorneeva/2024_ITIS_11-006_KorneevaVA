Настройка в для работы с фоновыми задачами в проекте Основы Уроки Примеры Библиотеки База знаний Поиск Основы Уроки Примеры Библиотеки База знаний Главная Примеры Как настроить в Как настроить в В этом руководстве по использованию совместно с я расскажу Как настроить с Как протестировать задачу в оболочке Где контролировать работу приложения Вы можете использовать на исходный код проекта из этого репозитория Зачем приложению на нужен нужен для запуска задач в отдельном рабочем процессе что позволяет немедленно отправить ответ пользователю в веб процессе даже если задача в рабочем процессе все еще выполняется Цикл обработки запроса не будет заблокирован что повысит качество взаимодействия с пользователем Ниже приведены некоторые примеры использования Вы создали приложение с функцией отправки комментариев в которых пользователь может использовать символ чтобы упомянуть другого пользователя после чего последний получит уведомление по электронной почте Если пользователь упоминает человек в своем комментарии веб процессу необходимо обработать и отправить электронных писем Иногда это занимает много времени сеть сервер и другие факторы В данном случае может организовать отправку писем в фоновом режиме что в свою очередь позволит вернуть ответ пользователю без ожидания Нужно создать миниатюру загруженного пользователем изображения Такую задачу стоит выполнить в рабочем процессе Вам необходимо делать что то периодически например генерировать ежедневный отчет очищать данные истекшей сессии Используйте для отправки задач рабочему процессу в назначенное время Когда вы создаете веб приложение постарайтесь сделать время отклика не более чем мс используйте или если пользователь ожидает ответа слишком долго выясните причину и попытайтесь устранить ее В решении такой проблемы может помочь или еще одна библиотека которая решает вышеуказанные проблемы Логика работы схожа с используется шаблон проектирования производитель потребитель Далее я проведу поверхностное сравнение для лучшего понимания какой из инструментов более подходит для задачи проста в освоении направлена на снижение барьера в использовании асинхронного рабочего процесса В ней отсутствуют некоторые функции и она работает только с и предоставляет больше возможностей поддерживает множество различных серверных конфигураций Одним из минусов такой гибкости является более сложная документация что довольно часто пугает новичков Я предпочитаю поскольку он замечательно подходит для решения многих проблем Данная статья написана мной чтобы помочь читателю особенно новичку быстро изучить Брокер сообщений и бэкенд результатов Брокер сообщений это хранилище которое играет роль транспорта между производителем и потребителем Из документации рекомендуемым брокером является потому что он поддерживает расширенный протокол очереди сообщений Так как во многих случаях нам не нужно использовать другой диспетчер очереди такой как также подойдет Бэкенд результатов это хранилище которое содержит информацию о результатах выполнения задач и о возникших ошибках Здесь рекомендуется использовать Как настроить не работает на Используйте или терминал в Далее я покажу вам как импортировать в ваш проект Мы будем использовать в качестве брокера сообщений и бэкенда результатов что немного упрощает задачу Но вы свободны в выборе любой другой комбинации которая удовлетворяет требованиям вашего приложения Используйте для подготовки среды разработки Если вы работаете в или у вас есть возможность использовать менеджер пакетов для настройки однако я хотел бы порекомендовать вам попробовать применить для установки сервера Вы можете скачать клиент здесь Затем попробуйте запустить службу Команда выше запустит на Если вы намерены использовать в качестве брокера сообщений вам нужно изменить только приведенную выше команду Закончив работу с проектом вы можете закрыть контейнер окружение вашей рабочей машины по прежнему будет чистым Теперь импортируем в наш проект Создание проекта Рекомендую создать отдельное виртуальное окружение и работать в нем Ниже представлена структура проекта Файл Давайте приступим к установке и настройке Создайте файл рядом с Копировать Скопировано Файл настроек этот код скопирован с он установит модуль настроек по умолчанию для приложения здесь вы меняете имя Для получения настроек связываем префикс с настройкой загрузка в приложение Файл Давайте продолжим изменять проект в добавьте Копировать Скопировано Это позволит убедиться что приложение всегда импортируется когда запускается Дополнение Поскольку может читать конфигурацию из файла настроек мы внесем в него следующие изменения Копировать Скопировано Есть кое что о чем следует помнить При изучении документации вы вероятно увидите что это ключ конфигурации который вы должны установить для диспетчера сообщений однако в приведенном выше сообщает чтобы он считывал значение из пространства имен поэтому если вы установите просто в своем файле настроек этот параметр не будет работать Правило применяется для всех ключей конфигурации в документации Некоторые конфигурационные ключи различаются между и так что пожалуйста загляните в документацию при настройке Отправка заданий После завершение работы с конфигурацией все готово к использованию Мы будем запускать некоторые команды в отдельном терминале но я рекомендую вам взглянуть на когда у вас будет время Сначала запустите клиент потом в другом терминале это имя приложения которое вы установили в Далее запустим приложение в новом терминале которое поможет нам отслеживать задачу я расскажу об этом чуть позже Затем откройте Вы должны увидеть информационную панель на которой отображаются детали выполнения рабочего процесса Теперь войдем в и попробуем отправить несколько задач Рассмотрим некоторые моменты Мы используем для отправки сообщения брокеру Рабочий процесс получает эту задачу и выполняет ее Когда вы нажимаете клавишу для ввода кажется что команда быстро завершает выполнение отсутствие блокировки но метод добавления все еще активен в рабочем процессе Если вы проверите вывод терминала где был запущен то увидите что то вроде этого Рабочий процесс получил задачу в и она была успешно выполнена Думаю теперь у вас уже есть базовое представление об использовании Попробуем ввести еще один блок кода Затем давайте попробуем вызвать ошибку в и посмотрим что произойдет Как видите результатом вызова метода является экземпляр Мы можем использовать его следующим образом Проверить состояние задачи Узнать возвращенное значение результат или сведения об исключении Получить другие метаданные Мониторинг с помощью позволяет отобразить информацию о работу более наглядно на веб странице с дружественным интерфейсом Это значительно упрощает понимание происходящего поэтому я хочу обратить внимание на прежде чем углубиться в дальнейшее рассмотрение адрес панели управления Откройте страницу задач При изучении довольно полезно использовать для лучшего понимания деталей Когда вы развертываете свой проект на сервере не является обязательным компонентом Я имею в виду что вы можете напрямую использовать команды чтобы управлять приложением и проверять статус рабочего процесса Заключение В этой статье я рассказал об основных аспектах Надеюсь что после прочтения вы стали лучше понимать процесс работы с ним Исходный код проекта доступен по ссылке в начале статьи ТЕГИ Максим Я создал этот блог в году чтобы распространять полезные учебные материалы документации и уроки на русском На сайте опубликовано множество статей по основам и библиотекам уроков для начинающих и примеров написания программ Мои контакты Почта Александр Редактор Статьи по теме Нахождение делителей числа с помощью Поиск максимального значения в списке на Количество элементов в списке с условиями или критериями как использовать в шаблонах Встроенные для машинного обучения примеров использования из Содержание Зачем приложению на нужен или Брокер сообщений и бэкенд результатов Как настроить Используйте для подготовки среды разработки Создание проекта Файл Файл Дополнение Отправка заданий Мониторинг с помощью Заключение Новое в блоге Нахождение делителей числа с помощью Лямбда функции и анонимные функции в Когда стоит использовать вместо в Как извлечь кубический корень в О проекте Политика конфиденциальности Правообладателям Контакты Хостинг Образовательный блог о 